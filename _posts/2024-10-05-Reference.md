---
title: "[C++] μ°Έμ΅°"
author: RePro
date: 2024-10-05 10:00:00 +0900
categories: [Programming, C++]
tags: [c++]
---

# C++ μ°Έμ΅°(Reference) μ •λ¦¬

## 1. C++ μ°Έμ΅°(Reference)λ€?

μ°Έμ΅°(Reference)λ” **λ³€μμ λ³„μΉ­(Alias)** μΌλ΅, μ›λ³Έ λ³€μμ™€ κ°™μ€ λ©”λ¨λ¦¬ μ£Όμ†λ¥Ό κ³µμ ν•©λ‹λ‹¤.

```cpp
int x = 10;
int& ref = x;  // xλ¥Ό μ°Έμ΅°ν•λ” ref μ„ μ–Έ
ref = 20;  // xμ κ°’λ„ 20μΌλ΅ λ³€κ²½λ¨
std::cout << x;  // μ¶λ ¥: 20
```
- **`ref`μ™€ `x`λ” κ°™μ€ λ©”λ¨λ¦¬ κ³µκ°„μ„ κ³µμ ν•λ―€λ΅ `ref`λ¥Ό λ³€κ²½ν•λ©΄ `x`λ„ λ³€κ²½λ©λ‹λ‹¤.**

---

## 2. μ°Έμ΅°μ κΈ°λ³Έ νΉμ§•
1. **ν• λ² μ°Έμ΅°ν•λ©΄ λ³€κ²½ λ¶κ°€** β†’ `int& ref = x;` μ΄ν›„ `ref`λ¥Ό λ‹¤λ¥Έ λ³€μμ— μ°Έμ΅°ν•  μ μ—†μ.
2. **μ΄κΈ°ν™”κ°€ λ°λ“μ‹ ν•„μ”** β†’ `int& ref;` λ” **μ¤λ¥ λ°μƒ!** (μ°Έμ΅°λ” `nullptr`μ΄ λ  μ μ—†μ).
3. **λ©”λ¨λ¦¬ μ£Όμ† κ³µμ ** β†’ μ°Έμ΅°λ” μ›λ³Έ λ³€μμ™€ κ°™μ€ μ£Όμ†λ¥Ό κ°€μ§.

```cpp
int x = 10;
int& ref = x;
std::cout << &x << " == " << &ref << std::endl; // κ°™μ€ μ£Όμ†
```

---

## 3. μ°Έμ΅°μ μΆ…λ¥

### π”Ή (1) μΌλ° μ°Έμ΅° (Lvalue Reference)
```cpp
int x = 10;
int& ref = x;
ref = 30;  // xλ„ 30μΌλ΅ λ³€κ²½λ¨
```

### π”Ή (2) μƒμ μ°Έμ΅° (Const Reference)
```cpp
const int x = 10;
const int& ref = x;  // xλ¥Ό μ½κΈ° μ „μ©μΌλ΅ μ°Έμ΅°
```

### π”Ή (3) Rvalue μ°Έμ΅° (Move Reference, `&&`)
```cpp
int&& rref = 10;  // μ„μ‹ κ°’(10)μ„ μ°Έμ΅°
std::cout << rref;  // 10
```
- **Rvalue μ°Έμ΅°(`&&`)λ¥Ό μ‚¬μ©ν•λ©΄ λ¶ν•„μ”ν• λ³µμ‚¬λ¥Ό λ°©μ§€ν•μ—¬ μ„±λ¥ μµμ ν™” κ°€λ¥**.
<!-- [μ΄κ³³ μ°Έκ³ ](/2024-10-16-Ravlue-move.md) -->

---

## 4. μ°Έμ΅° vs ν¬μΈν„° λΉ„κµ

| κµ¬λ¶„ | μ°Έμ΅° (`&`) | ν¬μΈν„° (`*`) |
|------|-----------|-------------|
| **NULL κ°€λ¥ μ—¬λ¶€** | β λ¶κ°€λ¥ | β… κ°€λ¥ (`nullptr`) |
| **μ΄κΈ°ν™” μ—¬λ¶€** | β… λ°λ“μ‹ μ΄κΈ°ν™” ν•„μ” | β ν•„μ” μ—†μ |
| **λ³€κ²½ κ°€λ¥ μ—¬λ¶€** | β ν• λ² μ„¤μ •ν•λ©΄ λ³€κ²½ λ¶κ°€ | β… κ°€λ¦¬ν‚¤λ” μ£Όμ† λ³€κ²½ κ°€λ¥ |
| **μ—­μ°Έμ΅° ν•„μ” μ—¬λ¶€** | β λ¶ν•„μ” (μ§μ ‘ μ‚¬μ©) | β… ν•„μ” (`*ptr`) |

```cpp
int x = 10;
int& ref = x;  // μ°Έμ΅°
int* ptr = &x; // ν¬μΈν„°

*ptr = 20;  // x = 20
ref = 30;   // x = 30
```

---

## 5. μ°Έμ΅° vs ν¬μΈν„°: μ–Έμ  μ‚¬μ©ν•΄μ•Ό ν• κΉ?

### **π”Ή μ°Έμ΅°λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ΄ μΆ‹μ€ κ²½μ°**
**(1) ν•¨μ μΈμλ΅ μ›λ³Έ λ°μ΄ν„°λ¥Ό μμ •ν•  λ•**
```cpp
void modify(int& num) { num += 10; }
int main() {
    int x = 10;
    modify(x);
    std::cout << x;  // 20
}
```

**(2) ν•¨μμ—μ„ λ¶ν•„μ”ν• λ³µμ‚¬λ¥Ό λ°©μ§€ν•  λ•**
```cpp
void print(const std::string& text) { std::cout << text << std::endl; }
std::string str = "Long Text";
print(str);  // λ³µμ‚¬ μ—†μ΄ μ›λ³Έ μ‚¬μ©
```

**(3) νΉμ • λ³€μλ¥Ό λ³„μΉ­(alias)λ΅ μ‚¬μ©ν•  λ•**
```cpp
int x = 100;
int& alias = x;  // xμ λ³„μΉ­
alias = 200;
std::cout << x;  // 200
```

**(4) Rvalueλ¥Ό ν™μ©ν•μ—¬ μ„±λ¥ μµμ ν™”ν•  λ• (μ΄λ™ μ‹λ©ν‹±)**
```cpp
void process(std::string&& str) { std::cout << "Processing: " << str << std::endl; }
process("Temporary String");
```

---

### **π”Ή ν¬μΈν„°λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ΄ μΆ‹μ€ κ²½μ°**
**(1) μ°Έμ΅°λ¥Ό λ³€κ²½ν•΄μ•Ό ν•  λ•**
```cpp
int a = 10, b = 20;
int* ptr = &a;
ptr = &b; // β… κ°€λ¥
```

**(2) `nullptr`μ„ ν—μ©ν•΄μ•Ό ν•  λ•**
```cpp
int* ptr = nullptr;  // β… κ°€λ¥
```

**(3) λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ήμ„ ν•  λ• (`new`/`delete`)**
```cpp
int* ptr = new int(10);
delete ptr;
```

**(4) λ°°μ—΄μ„ κ°€λ¦¬ν‚¬ λ•**
```cpp
int arr[3] = {10, 20, 30};
int* ptr = arr;
ptr++;
```

**(5) ν•¨μμ—μ„ λ³€μμ μ£Όμ†λ¥Ό μ €μ¥ν•΄μ•Ό ν•  λ•**
```cpp
void modifyPointer(int** ptr) {
    static int y = 20;
    *ptr = &y;
}
```

---

## 6. μ°Έμ΅° vs ν¬μΈν„° λΉ„κµ μ •λ¦¬

| μ‚¬μ© λ©μ  | μ°Έμ΅° (`&`) | ν¬μΈν„° (`*`) |
|----------|------------|--------------|
| **κ°’μ„ λ³€κ²½ν•΄μ•Ό ν•λ” κ²½μ°** | β… μ‚¬μ© κ°€λ¥ | β… μ‚¬μ© κ°€λ¥ |
| **μ°Έμ΅°ν•λ” λ€μƒ λ³€κ²½ κ°€λ¥ μ—¬λ¶€** | β λ¶κ°€λ¥ | β… κ°€λ¥ |
| **NULL(`nullptr`) κ°€λ¥ μ—¬λ¶€** | β λ¶κ°€λ¥ | β… κ°€λ¥ |
| **λ¶ν•„μ”ν• λ³µμ‚¬ λ°©μ§€ (`const &`)** | β… μ‚¬μ© κ°€λ¥ | β λ¶ν•„μ”ν• λ³µμ‚¬ λ°μƒ κ°€λ¥ |
| **λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ή (`new/delete`)** | β λ¶κ°€λ¥ | β… κ°€λ¥ |
| **λ°°μ—΄μ„ λ‹¤λ£° λ• (`ptr++`)** | β λ¶κ°€λ¥ | β… κ°€λ¥ |

---

## 7. κ²°λ΅ 
- **μ°Έμ΅°(`&`): μ•μ „ν• λ³„μΉ­, ν•¨μ μΈμλ΅ μ‚¬μ©ν•  λ•, λ³µμ‚¬ λ°©μ§€(`const &`)**  
- **ν¬μΈν„°(`*`): κ°€λ¦¬ν‚¤λ” λ€μƒ λ³€κ²½ κ°€λ¥, `nullptr` ν—μ©, λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ή, λ°°μ—΄ μ²λ¦¬**  
- **Rvalue μ°Έμ΅°(`&&`): μ΄λ™ μ—°μ‚°μ(move semantics)λ¥Ό ν™μ©ν•μ—¬ μ„±λ¥ μµμ ν™”**  

---

# C++ μ°Έμ΅°(Reference)μ™€ ν¬μΈν„°(Pointer)μ μ„±λ¥ λΉ„κµ

## 1. μ°Έμ΅°μ™€ ν¬μΈν„°λ” μ„±λ¥μ΄ λ™μΌν• κΉ?
C++μ—μ„ **μ°Έμ΅°(`&`)μ™€ ν¬μΈν„°(`*`)λ” λ¨λ‘ λ³€μμ μ£Όμ†λ¥Ό ν™μ©ν•μ—¬ κ°„μ ‘μ μΌλ΅ λ°μ΄ν„°λ¥Ό λ‹¤λ£¨μ§€λ§, λ΅μ°λ λ²¨μ—μ„ μ™„μ „ν λ™μΌν•κ² λ™μ‘ν•λ‹¤κ³  λ³Ό μλ” μ—†μµλ‹λ‹¤.**  
λ€λ¶€λ¶„μ κ²½μ° **μ°Έμ΅°λ” ν¬μΈν„°μ™€ μ μ‚¬ν• κΈ°κ³„μ–΄(μ–΄μ…λΈ”λ¦¬ μ½”λ“)λ΅ λ³€ν™λλ―€λ΅ μ„±λ¥ μ°¨μ΄λ” λ―Έλ―Έν•μ§€λ§, νΉμ • μƒν™©μ—μ„λ” μ°¨μ΄κ°€ λ°μƒν•  μλ„ μμµλ‹λ‹¤.**

---

## 2. μ°Έμ΅°μ™€ ν¬μΈν„°μ λ΅μ°λ λ²¨(μ–΄μ…λΈ”λ¦¬) λ™μ‘ λΉ„κµ
### π”Ή **C++ μ½”λ“**
```cpp
void modify(int& ref) {  // μ°Έμ΅° μ‚¬μ©
    ref = 20;
}

void modifyPtr(int* ptr) {  // ν¬μΈν„° μ‚¬μ©
    *ptr = 20;
}

int main() {
    int x = 10;
    modify(x);    // μ°Έμ΅° ν•¨μ νΈμ¶
    modifyPtr(&x); // ν¬μΈν„° ν•¨μ νΈμ¶
}
```

### π”Ή **GCC μ»΄νμΌ ν›„ μ–΄μ…λΈ”λ¦¬ μ½”λ“ (x86-64)**
```assembly
modify(int&):
    mov DWORD PTR [rdi], 20  ; μ°Έμ΅°λ¥Ό ν¬μΈν„°μ²λΌ λ‹¤λ£Έ
    ret

modifyPtr(int*):
    mov DWORD PTR [rdi], 20  ; ν¬μΈν„°λ¥Ό μ—­μ°Έμ΅°ν•μ—¬ κ°’ λ³€κ²½
    ret
```
- **μ°Έμ΅°(`int& ref`)μ™€ ν¬μΈν„°(`int* ptr`)μ μ–΄μ…λΈ”λ¦¬ μ½”λ“λ” λ™μΌν•κ² λ³€ν™λ¨.**  
- **μ¦‰, ν•¨μ μΈμλ΅ μ°Έμ΅°λ¥Ό μ‚¬μ©ν•΄λ„ λ‚΄λ¶€μ μΌλ΅λ” ν¬μΈν„°μ™€ λ™μΌν• λ°©μ‹μΌλ΅ μ²λ¦¬λ¨.**  
- **λ”°λΌμ„ λ‹¨μν• λ³€μ μ°Έμ΅°λ” μ„±λ¥ μ°¨μ΄κ°€ μ—†μ.**

---

## 3. μ„±λ¥ μ°¨μ΄κ°€ λ°μƒν•  μ μλ” κ²½μ°

### (1) μµμ ν™” κ΄€μ : μ°Έμ΅°κ°€ λ” λΉ λ¥Ό μ μμ
μ»΄νμΌλ¬λ” **μ°Έμ΅°κ°€ μ λ€ `nullptr`μ΄ λ  μ μ—†μμ„ λ³΄μ¥**ν•λ―€λ΅, μµμ ν™”μ—μ„ μ λ¦¬ν•  μ μμµλ‹λ‹¤.

```cpp
void modify(int& ref) {
    ref += 10;  // μ°Έμ΅°λ” null-check λ¶ν•„μ”
}

void modifyPtr(int* ptr) {
    if (ptr) {   // ν¬μΈν„°λ” null-check ν•„μ”
        *ptr += 10;
    }
}
```
- **μ»΄νμΌλ¬λ” μ°Έμ΅°κ°€ ν•­μƒ μ ν¨ν• λ³€μμ„μ„ λ³΄μ¥ν•κΈ° λ•λ¬Έμ—, λ¶ν•„μ”ν• `nullptr` μ²΄ν¬λ¥Ό μ κ±°ν•κ³  μµμ ν™”ν•  μ μμ.**  
- **λ°λ©΄, ν¬μΈν„°λ” `nullptr` μ²΄ν¬κ°€ ν•„μ”ν•  μλ„ μμ–΄, μ•½κ°„μ μ„±λ¥ μ°¨μ΄κ°€ λ°μƒν•  κ°€λ¥μ„±μ΄ μμ.**

---

### (2) μ°Έμ΅°μ ν•κ³„: μ°Έμ΅°λ¥Ό λ³€κ²½ν•  μ μ—†μ
```cpp
int x = 10, y = 20;
int& ref = x;  // refλ” xλ¥Ό μ°Έμ΅°

ref = y;  // β refκ°€ yλ¥Ό μ°Έμ΅°ν•λ” κ²ƒμ΄ μ•„λ‹λΌ, xμ κ°’μ„ yλ΅ λ³€κ²½
```
- **μ°Έμ΅°λ” ν• λ² νΉμ • λ³€μμ— μ—°κ²°λλ©΄ λ³€κ²½ν•  μ μ—†μ.**  
- **μ΄ λ•λ¬Έμ— κ°€λ³€μ μΈ μ£Όμ†λ¥Ό λ‹¤λ¤„μ•Ό ν•  κ²½μ° ν¬μΈν„°κ°€ ν•„μμ μ΄λ©°, μ„±λ¥ λ©΄μ—μ„ λ” μ λ¦¬ν•  μλ„ μμ.**

---

### (3) κ°μ²΄ μ§€ν–¥ ν”„λ΅κ·Έλλ°(OOP)μ—μ„ μ°Έμ΅°κ°€ λ” μ λ¦¬ν• κ²½μ°
ν΄λμ¤μ λ©¤λ²„ λ³€μλ΅ ν¬μΈν„°λ¥Ό μ‚¬μ©ν•  κ²½μ°, **λ™μ μΌλ΅ ν• λ‹Ήλ κ°μ²΄λ¥Ό μ¶”μ ν•λ”λ° μ¶”κ°€ λΉ„μ©μ΄ λ°μƒ**ν•  μ μμµλ‹λ‹¤.

```cpp
class MyClass {
private:
    int& ref;  // μ°Έμ΅° (μ¶”μ  λΉ„μ© μ—†μ)
    int* ptr;  // ν¬μΈν„° (NULL μ²΄ν¬ ν•„μ”)

public:
    MyClass(int& r, int* p) : ref(r), ptr(p) {}

    void update() {
        ref += 10;  // β… μ§μ ‘ μ ‘κ·Ό (λΉ λ¦„)
        if (ptr) {  // β NULL μ²΄ν¬ ν•„μ” (μ„±λ¥ μ €ν• κ°€λ¥)
            *ptr += 10;
        }
    }
};
```
- **ν΄λμ¤ λ‚΄λ¶€μ—μ„ μ°Έμ΅°λ¥Ό μ‚¬μ©ν•λ©΄ NULL μ²΄ν¬κ°€ λ¶ν•„μ”ν•μ—¬ μ„±λ¥μ΄ ν–¥μƒλ  κ°€λ¥μ„±μ΄ μμ.**  
- **λ°λ©΄, ν¬μΈν„°λ¥Ό μ‚¬μ©ν•  κ²½μ° NULLμΈμ§€ μ²΄ν¬ν•΄μ•Ό ν•λ” λΉ„μ©μ΄ μ¶”κ°€λ  μ μμ.**

---

### (4) λ©€ν‹°μ¤λ λ”© ν™κ²½μ—μ„ ν¬μΈν„°κ°€ λ” μ λ¦¬ν• κ²½μ°
λ©€ν‹°μ¤λ λ”© ν™κ²½μ—μ„λ” **μ°Έμ΅°λ³΄λ‹¤λ” ν¬μΈν„°λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ΄ μ•μ „ν•  μλ„ μμ**.

```cpp
void threadFunction(int& ref) {
    ref += 1;  // π¨ λ°μ΄ν„° λ μ΄μ¤ λ°μƒ κ°€λ¥
}

void threadFunction(int* ptr) {
    if (ptr) {
        *ptr += 1;  // β… λ” μ•μ „ν•¨
    }
}
```
- **μ°Έμ΅°λ” `nullptr`μ„ κ°€μ§ μ μ—†μ–΄ NULL μ²΄ν¬λ¥Ό ν•  μ μ—†κΈ° λ•λ¬Έμ—, μ¤λ λ“κ°€ μκΈ°μΉ μ•κ² λ™μ‘ν•  μ μμ.**  
- **λ©€ν‹°μ¤λ λ”© ν™κ²½μ—μ„λ” μ•μ „μ„±μ„ κ³ λ ¤ν•μ—¬ ν¬μΈν„°λ¥Ό μ„ νΈν•λ” κ²½μ°κ°€ μμ.**

---

## 4. μ°Έμ΅° vs ν¬μΈν„°: μ„±λ¥ μ°¨μ΄ μ •λ¦¬

| κµ¬λ¶„ | μ°Έμ΅° (`&`) | ν¬μΈν„° (`*`) |
|------|-----------|-------------|
| **μ–΄μ…λΈ”λ¦¬ λ³€ν™** | β… ν¬μΈν„°μ™€ λ™μΌ | β… λ™μΌ |
| **μµμ ν™” κ°€λ¥μ„±** | β… NULL μ²΄ν¬ λ¶ν•„μ” | β NULL μ²΄ν¬ ν•„μ” κ°€λ¥μ„± |
| **κ°€λ³€μ„±** | β λ³€κ²½ λ¶κ°€λ¥ | β… λ³€κ²½ κ°€λ¥ |
| **λ©€ν‹°μ¤λ λ“ μ•μ •μ„±** | π¨ μ„ν— κ°€λ¥μ„± μμ | β… NULL μ²΄ν¬ κ°€λ¥ |

---

## 5. κ²°λ΅ 
- **μΌλ°μ μΈ μ„±λ¥μ€ λ™μΌν•μ§€λ§, μµμ ν™” μ—¬λ¶€, κ°€λ³€μ„±, μ¤λ λ“ μ•μ „μ„± λ“±μ— λ”°λΌ μ°¨μ΄κ°€ λ°μƒν•  μ μμ**.  
- **μ»΄νμΌλ¬κ°€ μµμ ν™”λ¥Ό μ μν–‰ν•λ©΄ μ„±λ¥ μ°¨μ΄λ” κ±°μ μ—†μ§€λ§, μ°Έμ΅°λ” λ¶ν•„μ”ν• NULL μ²΄ν¬λ¥Ό μ κ±°ν•  μ μμ–΄ μ•½κ°„μ μµμ ν™” κ°€λ¥μ„±μ΄ μμ**.  
- **λ©€ν‹°μ¤λ λ“ ν™κ²½μ—μ„λ” ν¬μΈν„°κ°€ λ” μ•μ „ν•  μλ„ μμ**.  


